(function(){"use strict";var e=angular.version.major===1&&angular.version.minor===0;angular.module("ui-rangeSlider",[]).directive("rangeSlider",["$document","$filter","$log",function(t,n,r){var i=".rangeSlider",s={disabled:false,orientation:"horizontal",step:0,decimalPlaces:0,showValues:true,preventEqualMinMax:false,attachHandleValues:false},o=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup",over:"pointerdown",out:"mouseout"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp",over:"MSPointerDown",out:"mouseout"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend",over:"mouseover touchstart",out:"mouseout"},u=o.start+i,a=o.move+i,f=o.end+i,l=o.over+i,c=o.out+i,h=function(e){try{return[e.clientX||e.originalEvent.clientX||e.originalEvent.touches[0].clientX,e.clientY||e.originalEvent.clientY||e.originalEvent.touches[0].clientY]}catch(t){return["x","y"]}},p=function(e){return e<0?0:e>100?100:e},d=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},v={disabled:"=?",min:"=",max:"=",modelMin:"=?",modelMax:"=?",onHandleDown:"&",onHandleUp:"&",orientation:"@",step:"@",decimalPlaces:"@",filter:"@",filterOptions:"@",showValues:"@",pinHandle:"@",preventEqualMinMax:"@",attachHandleValues:"@"};if(e){v.disabled="=";v.modelMin="=";v.modelMax="="}return{restrict:"A",replace:true,template:['<div class="ngrs-range-slider">','<div class="ngrs-runner">','<div class="ngrs-handle ngrs-handle-min"><i></i></div>','<div class="ngrs-handle ngrs-handle-max"><i></i></div>','<div class="ngrs-join"></div>',"</div>",'<div class="ngrs-value-runner">','<div class="ngrs-value ngrs-value-min" ng-show="showValues"><div>{{filteredModelMin}}</div></div>','<div class="ngrs-value ngrs-value-max" ng-show="showValues"><div>{{filteredModelMax}}</div></div>',"</div>","</div>"].join(""),scope:v,link:function(e,o,v,m){function k(e){if(e==="min"){angular.element(y[0]).css("display","none");angular.element(y[1]).css("display","block")}else if(e==="max"){angular.element(y[0]).css("display","block");angular.element(y[1]).css("display","none")}else{angular.element(y[0]).css("display","block");angular.element(y[1]).css("display","block")}}function L(e){if(e){g.addClass("ngrs-disabled")}else{g.removeClass("ngrs-disabled")}}function A(){if(e.min>e.max){_("min must be less than or equal to max")}if(angular.isDefined(e.min)&&angular.isDefined(e.max)){if(!d(e.min)){_("min must be a number")}if(!d(e.max)){_("max must be a number")}N=e.max-e.min;T=[e.min,e.max];O()}}function O(){if(e.modelMin>e.modelMax){D("modelMin must be less than or equal to modelMax");e.modelMin=e.modelMax}if((angular.isDefined(e.modelMin)||e.pinHandle==="min")&&(angular.isDefined(e.modelMax)||e.pinHandle==="max")){if(!d(e.modelMin)){if(e.pinHandle!=="min"){D("modelMin must be a number")}e.modelMin=e.min}if(!d(e.modelMax)){if(e.pinHandle!=="max"){D("modelMax must be a number")}e.modelMax=e.max}var t=p((e.modelMin-e.min)/N*100),r=p((e.modelMax-e.min)/N*100),i,s;if(e.attachHandleValues){i=t;s=r}e.modelMin=Math.max(e.min,e.modelMin);e.modelMax=Math.min(e.max,e.modelMax);if(e.filter){e.filteredModelMin=n(e.filter)(e.modelMin,e.filterOptions);e.filteredModelMax=n(e.filter)(e.modelMax,e.filterOptions)}else{e.filteredModelMin=e.modelMin;e.filteredModelMax=e.modelMax}if(e.min===e.max&&e.modelMin==e.modelMax){angular.element(y[0]).css(E,"0%");angular.element(y[1]).css(E,"100%");if(e.attachHandleValues){angular.element(".ngrs-value-runner").addClass("ngrs-attached-handles");angular.element(b[0]).css(E,"0%");angular.element(b[1]).css(E,"100%")}angular.element(w).css(E,"0%").css(S,"0%")}else{angular.element(y[0]).css(E,t+"%");angular.element(y[1]).css(E,r+"%");if(e.attachHandleValues){angular.element(".ngrs-value-runner").addClass("ngrs-attached-handles");angular.element(b[0]).css(E,i+"%");angular.element(b[1]).css(E,s+"%");angular.element(b[1]).css(S,"auto")}angular.element(w).css(E,t+"%").css(S,100-r+"%");if(t>95){angular.element(y[0]).css("z-index",3)}}}}function M(n){var r=y[n];r.bind(u+"X",function(s){var o=(n===0?"ngrs-handle-min":"ngrs-handle-max")+"-down",u=(n===0?e.modelMin:e.modelMax)-e.min,l=u/N*100,c=h(s),d=c,v=false;if(angular.isFunction(e.onHandleDown)){e.onHandleDown()}angular.element("body").bind("selectstart"+i,function(){return false});if(!e.disabled){C=true;r.addClass("ngrs-down");g.addClass("ngrs-focus "+o);angular.element("body").addClass("ngrs-touching");t.bind(a,function(t){t.preventDefault();var i=h(t),s,o,u,a=e.step/N*100,f=((n===0?e.modelMax:e.modelMin)-e.min)/N*100;if(i[0]==="x"){return}i[0]-=c[0];i[1]-=c[1];s=[d[0]!==i[0],d[1]!==i[1]];o=l+i[x]*100/(x?g.height():g.width());o=p(o);if(e.preventEqualMinMax){if(a===0){a=1/N*100}if(n===0){f=f-a}else if(n===1){f=f+a}}if(n===0){o=o>f?f:o}else if(n===1){o=o<f?f:o}if(e.step>0){if(o<100&&o>0){o=Math.round(o/a)*a}}if(o>95&&n===0){r.css("z-index",3)}else{r.css("z-index","")}if(s[x]&&o!=v){if(n===0){e.modelMin=parseFloat(o*N/100+e.min).toFixed(e.decimalPlaces)}else if(n===1){e.modelMax=parseFloat(o*N/100+e.min).toFixed(e.decimalPlaces)}e.$apply();v=o}d=i}).bind(f,function(){if(angular.isFunction(e.onHandleUp)){e.onHandleUp()}t.off(a);t.off(f);angular.element("body").removeClass("ngrs-touching");C=false;r.removeClass("ngrs-down");r.removeClass("ngrs-over");g.removeClass("ngrs-focus "+o)})}}).on(l,function(){r.addClass("ngrs-over")}).on(c,function(){if(!C){r.removeClass("ngrs-over")}})}function _(t){e.disabled=true;throw new Error("RangeSlider: "+t)}function D(e){r.warn(e)}var g=angular.element(o),y=[o.find(".ngrs-handle-min"),o.find(".ngrs-handle-max")],b=[o.find(".ngrs-value-min"),o.find(".ngrs-value-max")],w=o.find(".ngrs-join"),E="left",S="right",x=0,T=[0,0],N=0,C=false;e.filteredModelMin=e.modelMin;e.filteredModelMax=e.modelMax;v.$observe("disabled",function(t){if(!angular.isDefined(t)){e.disabled=s.disabled}e.$watch("disabled",L)});v.$observe("orientation",function(t){if(!angular.isDefined(t)){e.orientation=s.orientation}var n=e.orientation.split(" "),r;for(var i=0,o=n.length;i<o;i++){n[i]="ngrs-"+n[i]}r=n.join(" ");g.addClass(r);if(e.orientation==="vertical"||e.orientation==="vertical left"||e.orientation==="vertical right"){E="top";S="bottom";x=1}});v.$observe("step",function(t){if(!angular.isDefined(t)){e.step=s.step}});v.$observe("decimalPlaces",function(t){if(!angular.isDefined(t)){e.decimalPlaces=s.decimalPlaces}});v.$observe("showValues",function(t){if(!angular.isDefined(t)){e.showValues=s.showValues}else{if(t==="false"){e.showValues=false}else{e.showValues=true}}});v.$observe("pinHandle",function(t){if(!angular.isDefined(t)){e.pinHandle=null}else{if(t==="min"||t==="max"){e.pinHandle=t}else{e.pinHandle=null}}e.$watch("pinHandle",k)});v.$observe("preventEqualMinMax",function(t){if(!angular.isDefined(t)){e.preventEqualMinMax=s.preventEqualMinMax}else{if(t==="false"){e.preventEqualMinMax=false}else{e.preventEqualMinMax=true}}});v.$observe("attachHandleValues",function(t){if(!angular.isDefined(t)){e.attachHandleValues=s.attachHandleValues}else{if(t==="false"){e.attachHandleValues=false}else{e.attachHandleValues=true}}});e.$watch("min",A);e.$watch("max",A);e.$watch("modelMin",O);e.$watch("modelMax",O);e.$on("$destroy",function(){g.off(i);angular.element("body").off(i);t.off(i);for(var e=0,n=y.length;e<n;e++){y[e].off(i);y[e].off(i+"X")}});g.bind("selectstart"+i,function(e){return false}).bind("click",function(e){e.stopPropagation()});M(0);M(1)}}}]);window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()})()